<html>
  
<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  
  <title>关于微信公众号个性化菜单的产品模型分析和思考 | Liu.jianyang</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="背景概述 微信公众号平台提供了个性化菜单的相关接口，第三方开发者可以直接调取使用。产品经理计划要在自家产品加上这个功能，在阅读官方的开发文档后，就设计了产品原型，方案A就是主要的设计思路。 但在UI设计过程中，我们发现产品提供的产品原型方案在可用性和使用场景上存在欠妥的地方，双方对个性化菜单上也有着不一样的理解。于是重新换了种思路设计了方案B，后续再与产品作进一步沟通。 方案分析方案A和方案B，是">
<meta name="keywords" content="design">
<meta property="og:type" content="article">
<meta property="og:title" content="关于微信公众号个性化菜单的产品模型分析和思考">
<meta property="og:url" content="https://yangbe.github.io/posts/9f178846/index.html">
<meta property="og:site_name" content="Liu.jianyang">
<meta property="og:description" content="背景概述 微信公众号平台提供了个性化菜单的相关接口，第三方开发者可以直接调取使用。产品经理计划要在自家产品加上这个功能，在阅读官方的开发文档后，就设计了产品原型，方案A就是主要的设计思路。 但在UI设计过程中，我们发现产品提供的产品原型方案在可用性和使用场景上存在欠妥的地方，双方对个性化菜单上也有着不一样的理解。于是重新换了种思路设计了方案B，后续再与产品作进一步沟通。 方案分析方案A和方案B，是">
<meta property="og:locale" content="default">
<meta property="og:image" content="https://user-images.githubusercontent.com/9880101/67141909-03d74800-f295-11e9-9b59-c197302a1789.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/9880101/67074859-8a6c2680-f1bc-11e9-95a4-c5925a154ba6.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/9880101/67074655-20538180-f1bc-11e9-88eb-c4d7c7fde27b.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/9880101/67075824-84774500-f1be-11e9-9dc6-32843d1450d2.jpg">
<meta property="og:image" content="https://user-images.githubusercontent.com/9880101/67174422-8cb8c580-f3f4-11e9-9201-db5480324e35.png">
<meta property="og:updated_time" content="2019-10-25T05:08:32.618Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="关于微信公众号个性化菜单的产品模型分析和思考">
<meta name="twitter:description" content="背景概述 微信公众号平台提供了个性化菜单的相关接口，第三方开发者可以直接调取使用。产品经理计划要在自家产品加上这个功能，在阅读官方的开发文档后，就设计了产品原型，方案A就是主要的设计思路。 但在UI设计过程中，我们发现产品提供的产品原型方案在可用性和使用场景上存在欠妥的地方，双方对个性化菜单上也有着不一样的理解。于是重新换了种思路设计了方案B，后续再与产品作进一步沟通。 方案分析方案A和方案B，是">
<meta name="twitter:image" content="https://user-images.githubusercontent.com/9880101/67141909-03d74800-f295-11e9-9b59-c197302a1789.png">
  
    <link rel="icon" href="/images/favicon.ico">
  
  <link rel="stylesheet" href="/css/index.css">
  <link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/highlight.js/9.2.0/styles/github.min.css">
</head>
</html>

<body style"


  background-color: #ffffff

">
  <div id="container">
    <nav id="nav">
  <header class="header">
    <a href="/" class="title"><img src="https://avatars0.githubusercontent.com/u/9880101?s=460&v=4"></a>
    <!-- <a href="/" class="title"><img  src="/images/logo.svg"></a> -->
    <!-- <a href="/" class="title">Liu.Jiany</a> -->
    <!-- <a href="/" class="title">Jiany.Liu</a> -->
    <div class="menu">
        
          
              <a href="/" class="nav-menu ">博客</a>
            
          
              <a href="/portfolio" class="nav-menu ">作品</a>
            
          
              <a href="/about" class="nav-menu ">关于我</a>
            
          
        
      </div>
  </header>

</nav>
    <div id="main"><section class="article">
  <h2 class="title">关于微信公众号个性化菜单的产品模型分析和思考</h2>
  <p class="sub">Oct 18, 2019</p>
  <!-- toc目录 -->
  <!-- <aside id="article-toc" role="navigation" class="fixed">
    <div class="article-toc-inner">
        <strong class="sidebar-title">
            目录
        </strong>
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#背景概述"><span class="toc-text">背景概述</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#方案分析"><span class="toc-text">方案分析</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#方案A"><span class="toc-text">方案A</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#方案B"><span class="toc-text">方案B</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#验证"><span class="toc-text">验证</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#问题回归"><span class="toc-text">问题回归</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#思考和启发"><span class="toc-text">思考和启发</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#第一性原理"><span class="toc-text">第一性原理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#抽象化功能，总结规律和模式"><span class="toc-text">抽象化功能，总结规律和模式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#优先业务数据建模"><span class="toc-text">优先业务数据建模</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#演推和预判"><span class="toc-text">演推和预判</span></a></li></ol></li></ol>
    </div>
</aside> -->
  <article class="content">
    <h1 id="背景概述"><a href="#背景概述" class="headerlink" title="背景概述"></a>背景概述</h1><p><img src="https://user-images.githubusercontent.com/9880101/67141909-03d74800-f295-11e9-9b59-c197302a1789.png" alt="banner"></p>
<p>微信公众号平台提供了<strong>个性化菜单</strong>的相关接口，第三方开发者可以直接调取使用。产品经理计划要在自家产品加上这个功能，在阅读官方的开发文档后，就设计了产品原型，方案A就是主要的设计思路。</p>
<p>但在UI设计过程中，我们发现产品提供的产品原型方案在可用性和使用场景上存在欠妥的地方，双方对个性化菜单上也有着不一样的理解。于是重新换了种思路设计了方案B，后续再与产品作进一步沟通。</p>
<h1 id="方案分析"><a href="#方案分析" class="headerlink" title="方案分析"></a>方案分析</h1><p>方案A和方案B，是基于对个性化菜单的两种不同的理解模型展开的，对UI设计的影响可以控制得比较小，但在产品功能的设计思路、后端底层数据存储和处理却是完全不一样的思路。</p>
<p>方案A存在好几个问题，也正是这几个问题确定了这个方案不太可能继续往下走。由于功能设计的拓展性差和对实际使用场景考虑的不周到，最终导致的结果只会是推倒重来，重新修改产品设计和开发。方案B除了能满足产品目标，还弥补了方案A的问题。</p>
<p>下面我们来看看方案A和方案B的差异和优缺点。</p>
<h2 id="方案A"><a href="#方案A" class="headerlink" title="方案A"></a>方案A</h2><p><img src="https://user-images.githubusercontent.com/9880101/67074859-8a6c2680-f1bc-11e9-95a4-c5925a154ba6.png" alt="Modal1"></p>
<p><strong>模型：</strong></p>
<p>个性化菜单，是一项独立的<strong>主菜单</strong>（如图中菜单3、菜单2…所示），匹配替换的时候是以默认菜单为基础，从左起第一项主菜单开始逐项替换。</p>
<p><strong>替换规则：</strong></p>
<ol>
<li><p>把个性化菜单按最近创建时间排序，最新创建的排在最前面；</p>
</li>
<li><p>检测个性化中的菜单3的“matchrule”是否与用户的相关属性或标签匹配；</p>
</li>
<li><p>如果符合，即把默认菜单中的第一项菜单A替换成菜单3；</p>
</li>
<li><p>如果不符合，再检测菜单2的匹配规则是否符合用户，符合即替换，不符合即继续检测下一项，直到成功匹配并替换默认菜单的第一项；</p>
</li>
<li><p>默认菜单中的第一项菜单被匹配替换成功后，按照上面的规则继续匹配和替换默认菜单中的第二项菜单；</p>
</li>
<li><p>直至把默认菜单的所有项都替换完成，即终止剩余个性化菜单的匹配替换；如果剩余的个性化菜单都与用户不匹配，也终止个性化菜单的匹配替换</p>
</li>
</ol>
<p><strong>存在问题:</strong></p>
<p>产品经理设计的方案存在下面几项比较严重的漏洞：</p>
<ol>
<li>个性化菜单的替换是要在默认菜单中进行替换，如果成功匹配后，就破坏了默认菜单本身原有的结构；</li>
<li>最小替换单元是一项主菜单，公众号的关注用户每次进入都要检测匹配，容易给服务器增加不必要的访问压力；</li>
<li>替换顺序每次都必须要遵循从左到右依次替换，这种规则就会容易出现被替换的主菜单并不是用户真实想替换的那一项，这种替换方式并不符合实际场景的使用预期；</li>
<li>个性化菜单无法设定菜单的个数，系统设置的默认菜单有几项主菜单，个性化菜单就有几项</li>
</ol>
<p>以上这几点问题可以看出，方案A的个性化菜单其实并不那么个性，离自定义菜单的产品目的还相距甚远。菜单的替换逻辑过于局限且不符合实际的使用场景，比如无法控制个性化菜单上的菜单数量，也无法控制去操作具体替换哪一项菜单。</p>
<blockquote>
<p><strong>针对方案A存在问题，重新设计了另一个方案，即下面的方案B</strong></p>
</blockquote>
<h2 id="方案B"><a href="#方案B" class="headerlink" title="方案B"></a>方案B</h2><p><img src="https://user-images.githubusercontent.com/9880101/67074655-20538180-f1bc-11e9-88eb-c4d7c7fde27b.png" alt="modal2"></p>
<p><strong>模型：</strong></p>
<p>个性化菜单，是一整个<strong>菜单按钮组</strong>（如图中m1、m2、m3…mn所示），每一组个性化菜单里的菜单按钮（如菜单a1）可以设置子菜单，与默认菜单一样。</p>
<p><strong>替换规则：</strong></p>
<ol>
<li><p>把个性化菜单按最近创建时间排序，最新创建的排在最前面，优先匹配；</p>
</li>
<li><p>检测第一组个性化菜单中的“matchrule”是否有匹配的用户；</p>
</li>
<li><p>如果符合，用m1替换默认菜单，剩余的个性化菜单不再匹配；</p>
</li>
<li><p>如果不符合，再检测第二组个性化菜单的匹配规则是否符合用户，符合即替换，不符合即继续检测下一组个性化菜单，直到成功匹配并替换默认菜单；</p>
</li>
<li><p>如果剩余的个性化菜单都与用户不匹配，也终止个性化菜单的匹配替换</p>
</li>
</ol>
<p><strong>优势：</strong></p>
<p><strong><em>方案B的优势完全弥补了方案A中的缺点，在设计思路上也相对较为巧妙。</em></strong></p>
<ol>
<li>以一整个菜单组为最小单元进行匹配和替换，在软件设计和处理上可以把个性花菜单看成是带有匹配条件的”默认菜单”，也就是把它们看成菜单按钮组；</li>
<li>能够避免方案A中局限且不合实际使用场景的替换逻辑，可以完全控制菜单项的数量、内容、和排放顺序，做到真正意义上的个性化。</li>
</ol>
<h2 id="验证"><a href="#验证" class="headerlink" title="验证"></a>验证</h2><p>为了验证方案B的设计思路是否可行，以及要说服负责该功能的产品经理，少不了在大脑里无数次模拟个性化菜单相关的增删操作和设计相关的关键页面，以确保完整可行。</p>
<p>其次，google了很多地方结果一点毛线相关参考也没找到，后来直接重新看了微信公众号平台开发文档的相关内容，从代码示例中即验证了这种猜想。如下面代码片段所示（创建个性化菜单的示例），代码中的个性化菜单有两个主菜单：<strong><u>今日歌曲</u></strong> 和 <strong><u>菜单</u></strong>，<strong><u>菜单</u></strong>下面有三个子菜单，分别是 <u>搜索</u>、<u>wxa</u>、<u>赞我一下</u>。</p>
<p>由此可以看出，个性化菜单与默认菜单实际上是一样的，唯一的不同点是每组个性化菜单有自己的匹配规则(Matchrule)，符合规则的关注者会显示，不符合的则不显示。</p>
<pre><code class="javascript">{
    &quot;button&quot;: [
        {
            &quot;type&quot;: &quot;click&quot;, 
            &quot;name&quot;: &quot;今日歌曲&quot;, 
            &quot;key&quot;: &quot;V1001_TODAY_MUSIC&quot;
        }, 
        {
            &quot;name&quot;: &quot;菜单&quot;, 
            &quot;sub_button&quot;: [
                {
                    &quot;type&quot;: &quot;view&quot;, 
                    &quot;name&quot;: &quot;搜索&quot;, 
                    &quot;url&quot;: &quot;http://www.soso.com/&quot;
                }, 
                {
                    &quot;type&quot;: &quot;miniprogram&quot;, 
                    &quot;name&quot;: &quot;wxa&quot;, 
                    &quot;url&quot;: &quot;http://mp.weixin.qq.com&quot;, 
                    &quot;appid&quot;: &quot;wx286b93c14bbf93aa&quot;, 
                    &quot;pagepath&quot;: &quot;pages/lunar/index&quot;
                }, 
                {
                    &quot;type&quot;: &quot;click&quot;, 
                    &quot;name&quot;: &quot;赞一下我们&quot;, 
                    &quot;key&quot;: &quot;V1001_GOOD&quot;
                }
            ]
        }
    ], 
</code></pre>
<h1 id="问题回归"><a href="#问题回归" class="headerlink" title="问题回归"></a>问题回归</h1><p><strong><em>在阅读了官方文档后，为什么产品经理设计的方案会变得不一样，而且还隐藏着漏洞？</em></strong></p>
<p>简单分析了下，得出下面的几个观点。</p>
<p><strong>1. 对个性化菜单的模型理解比较表面</strong></p>
<p><img src="https://user-images.githubusercontent.com/9880101/67075824-84774500-f1be-11e9-9dc6-32843d1450d2.jpg" alt="error_defualtmenu" style="zoom:100%;"></p>
<p>把个性化菜单理解成一个主菜单按钮，<strong>一项个性化菜单</strong>  等同时于  <strong>一项菜单按钮</strong>。（上图所示）</p>
<p>这是一种理解，只是过于浅层，因为表面上给人的直觉就是把默认菜单的某一项或几项替换掉。如果简单地把这种理解作为规律直接应用到这项功能的设计上，结果就会变得有点局限，而且也不适合。</p>
<p><strong>2. 缺少对其它使用场景的考虑，没有预判当前方案设计可能会出现的问题</strong></p>
<p>对于设计方案，在设计过程中不防多预演几次，多考虑还有哪些基本的使用场景，有时是可以发现更多问题，反逼着换思路重新思考设计，比如能否可以控制个性化菜单主菜单按钮的数量，如果考虑到了，那方案A基本上在产品原型设计阶段就应该被x掉；另外，尽量考虑用更简单的逻辑去实现同样的功能。</p>
<p><strong>3. 思维已被锁定住了，跳不出来，没有回归到问题的本质</strong></p>
<p>对个性化菜单的理解已经思维定势，基本上是“我不要你觉得，我要我觉得”。然后各种操作交互特别是匹配规则都是在这种定势思维里继续演化。</p>
<h1 id="思考和启发"><a href="#思考和启发" class="headerlink" title="思考和启发"></a>思考和启发</h1><p>在产品设计中一不小心都很容易会埋下坑，个性化菜单只是个很小的例子。</p>
<p>埋坑的原因有各种各样的，列一下常见的：</p>
<ul>
<li>需求临时变更、漂浮不定导致的；</li>
<li>缺少相关经验，考虑不到位，比如某个功能的在使用场景上比较局限，或者没有考虑到与现有业务有关联，以及技术实现难度等问题；</li>
<li>协作流程上的问题，比如prd/原型文档不详细，交互细节、流程没写清楚，对接人员甚至整个团队在需求理解上产生偏移；</li>
<li>沟通不顺畅、信息不透明、信息传达不到位或滞后；</li>
<li>……</li>
</ul>
<p>即使是有标准的设计流程和研发流程，在软件整个设计过程研发过程中上述这些情况也是会经常发生。能做到的是，尽量在早期发现问题并解决它，特别是在设计阶段，因为越往后所积累的问题的解决成本可能会越大。</p>
<p><strong><em>在设计阶段（产品、交互、UI），怎样避免少一点埋坑呢？</em></strong></p>
<h2 id="第一性原理"><a href="#第一性原理" class="headerlink" title="第一性原理"></a>第一性原理</h2><p>第一性原理强调不要将思维锁定在表面的问题上，更需要做的是回到问题的出发点，有时候更甚至于要重新定义问题。</p>
<p>产品经理在设计方案A的时候，是简单地把个化性菜单看成在已有的默认菜单上进行自定义修改，方案A中的问题，离不开产品的思维停留在对个性化菜单的浅层理解。</p>
<p>要遵循已有的业务功能的描述，但不能盲从，换个思考角度来看待需求，换种方法去处理，也许会找到更简单更巧妙的方法、更优的解，能满足更多的场景使用需要。</p>
<p>产品经理设计的方案不一定是适合的，有时也会出错出漏洞，如果大家都不分对错只顾执行，相当于把错的东西换种方式重复再做一遍，继续错下去，于谁也不会有好处。这种时候更应该回归到实际问题上，用辩证的思维去看待分析，寻找是否还能有更好的方案。</p>
<h2 id="抽象化功能，总结规律和模式"><a href="#抽象化功能，总结规律和模式" class="headerlink" title="抽象化功能，总结规律和模式"></a>抽象化功能，总结规律和模式</h2><blockquote>
<p>思想、概念都是无形的，都是抽象的。我们在向别人介绍某一种事物时，事物本身可能是具体的，但当我们用语言、文字向他人描述时，实际上你描述的已成为经你抽象后的“另一事物”，这需要让受众与他经验中的具体的事物相联系，在受众的头脑中将你传递给他的信息重新组合、拼装成具体的事物，才能给受众形象的印象，否则别人不懂。[^百度百科]</p>
</blockquote>
<p>实际上，当我们在接受需求信息的时候，我们的大脑已经在开始有意识地组织需求信息，寻找规律，搭建业务的框架和流程模型。如果只是一味地只是接受信息，不做任何的加工处理，信息最后也只能成为一个简单的记忆符号，很难再有更多的价值。</p>
<p>特别是我们进行功能设计的时候，一边吸收需求，一边把具体的需求抽象化成某些普适的规律和模式，再把它应用到我们的设计中。</p>
<p>举个例子，偶数 <code>[2, 4, 6]</code>之于数学公式 <code>2n</code>，<code>[2, 4, 6]</code>是很具体的偶数，但<code>2n</code>能代表所有偶数，有着普适的规律和适用性，可以用来求出其它的偶数。</p>
<p>如果以后再遇到类似的替换覆盖的操作时，是直接内部单个元素替换还是采取整体替换的方案，这时候就可以想到我们这次个性化菜单的的两种模型。</p>
<p><strong>抽象化在产品功能设计中的作用：</strong></p>
<ul>
<li>更专注业务的本质，主干流程，避免过渡地思考细节，过渡地考虑细节经常带来的问题是主次不分；</li>
<li>把现象或问题总结成规律和模式；</li>
<li>跳出已有的思维模式，切换其它角度看问题，容易寻找创新点和改进点；</li>
</ul>
<h2 id="优先业务数据建模"><a href="#优先业务数据建模" class="headerlink" title="优先业务数据建模"></a>优先业务数据建模</h2><p>数据建模是指根据业务特点，总结归纳和设计业务数据对象之间关系的过程。虽然数据建模通常用在数据库设计里，但它实质上也是一个抽象化的过程，所以在产品设计过程中可以把它作为抽象化业务、归纳和设计规则的一种方法。</p>
<p>在B端的产品设计里，有很多的功能需要业务数据建模，比如账号体系、权限(RBAC相关的模型)，还有上面提到的公众号个性化菜单。在进入产品细节方案设计的时候，我们都会经常忽略基本的业务数据建模，直接着手每个页面的具体功能和交互设计，因为基础的底层数据关系没有梳理清楚，导至最后陷入了痛苦的混乱逻辑当中，我们的方案A就是典行没有做好数据建模。理想的做法是，<strong>先进行业务数据建模，然后再梳理流程和确认页面如何流转，最后才是每个页面的细节设计</strong>。</p>
<p>做数据建模还有一个好处是<strong>团队成员对业务功能的理解比较容易达成一致共识</strong>。当我们在设计或者描述一个业务功能的时候，不同的人大脑里对它的理解经常会不一样，有时甚至是截然相反的想法。出现这一点的原因是我们每个人大脑对业务功能的解析不一样，通过借助一些建模工具，比如<a href="https://www.visual-paradigm.com/cn/guide/uml-unified-modeling-language/what-is-uml/" target="_blank" rel="noopener">建模语言UML</a>、<a href="https://www.visual-paradigm.com/cn/guide/data-modeling/what-is-entity-relationship-diagram/" target="_blank" rel="noopener">ER图</a>，可以让自己梳理清晰流程、对象的关系和状态。模型是非常客观的，所以其他人在理解上不会容易地出现理解偏移。</p>
<p>下面两个类图分别是方案A和方案B中默认菜单与个性化菜单之间的关系模型。我们也能通过这些模型去分析方案自身的做给缺点，也有助于其它对接人员比如开发人员查看和理解。</p>
<p><img src="https://user-images.githubusercontent.com/9880101/67174422-8cb8c580-f3f4-11e9-9201-db5480324e35.png" alt="方案AB"></p>
<h2 id="演推和预判"><a href="#演推和预判" class="headerlink" title="演推和预判"></a>演推和预判</h2><p>演推和预判，是自己检验设计方案、发现问题的一种好方法</p>
<p>使用场景是否能满足</p>
<p>流程是否完整闭环</p>
<p>交互是清晰、有效率</p>
<p>用户在使用的时候可能会发生哪些问题</p>
<hr>

<p>[^百度百科]:引用于<a href="https://baike.baidu.com/item/%E6%8A%BD%E8%B1%A1%E5%8C%96/10844295?fr=aladdin" target="_blank" rel="noopener">百度百科</a></p>

  </article>
  <footer class="f-cf">
    
    
      <a href="/posts/c43d91a8/" class="link f-fr">团队合作注意问题→</a>
    
  </footer>
</section>

</div>
    <footer id="footer" class="f-cf">

  <div class="icons">
      
        
          
            <a href="https://www.behance.net/idiotyang" target="_blank" class="nav-icn iconfont icon-behance"></a>
          
        
          
            <a href="https://github.com/yangbe" target="_blank" class="nav-icn iconfont icon-github"></a>
          
        
      
    </div>

 
  <a href="mailto:jiany.liu@qq.com" class="email">jiany.liu@qq.com</a>
</footer>
<script type="text/javascript" src="//cdn.bootcss.com/highlight.js/9.2.0/highlight.min.js"></script>
<script>
  hljs.initHighlightingOnLoad();
</script>
  </div>
</body>

</html>